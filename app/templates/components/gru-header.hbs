
<div class="container-fluid {{if searchInputDirty 'search-input-dirty'}}">
  <div class="row">
    <div class="col-xs-12">
      <nav class="navbar navbar-default row">
        <div class="navbar-header">
          {{#if session.isAnonymous}}
            <a href="{{marketingSiteUrl}}" target="_blank" class="navbar-brand home-link"></a>
          {{else}}
            {{#link-to 'index' class="navbar-brand home-link"}}  {{/link-to}}
          {{/if}}
        </div>
        <div class="search-navbar-form {{if session.isAnonymous 'anonymous' 'authenticated'}}">
          <form {{action "searchTerm" on="submit"}} class="form-inline">
            <div class="form-group">
              <span>{{gru-icon name='search'}}</span>
              <div class="input-group validation {{if searchErrorMessage 'has-error'}}">
                {{input type="text" class="form-control search-input"
                  value=tempTerm
                  placeholder=(t "common.search-placeholder")
                  spellcheck="true"
                  focus-out="inputValueChange"
                }}
                {{#if searchErrorMessage}}
                  <span class="error">
                    {{t "common.search-error-message"}}
                  </span>
                {{/if}}
                {{#if isInvalidSearchTerm}}
                  <span class="error">
                    {{t "common.search-400-error-message"}}
                  </span>
                {{/if}}
              </div>
            </div>
          </form>
        </div>
        <div class="navbar-collapse">
          <ul class="nav navbar-nav menu-navbar">
            {{#if session.isAnonymous}}
            <li class="navbar-nav-list visible-md visible-lg">
                {{#link-to 'featured' class="navbar-link featured-link" }} {{t "common.featured-courses"}} {{/link-to}}
            </li>
              <li class="navbar-nav-list visible-md visible-lg">
                {{#link-to 'sign-in' class="btn btn-info sign-in-button" tagName='button'}} {{t "common.login"}} {{/link-to}}
              </li>
              <li class="navbar-nav-list visible-md visible-lg no-hover">
                {{#link-to 'sign-up' class="btn btn-primary sign-up-button" tagName='button'}} {{t "common.signUp"}} {{/link-to}}
              </li>
              <li class="navbar-nav-list hidden-md hidden-lg dropdown xs-design">
                  <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true">{{gru-icon name='menu'}}</a>
                  <ul class="dropdown-menu" role="menu">
                      <li class="navbar-nav-list close-menu">
                         <button class="btn dropdown-toggle" data-toggle="dropdown">{{gru-icon name='close'}}</button>
                      </li>
                      <li class="navbar-nav-list">
                        {{#link-to 'sign-in' class="navbar-link sign-in-link" }} {{t "common.login"}} {{/link-to}}
                      </li>
                      <li class="navbar-nav-list">
                          {{#link-to 'sign-up' class="navbar-link sign-up-link" }} {{t "common.signUp"}} {{/link-to}}
                      </li>
                      <li class="navbar-nav-list hidden-xs">
                          {{#link-to 'featured' class="navbar-link featured-link" }} {{t "common.featured-courses"}} {{/link-to}}
                      </li>
                  </ul>
              </li>
            {{else}}
              <li class="navbar-nav-list visible-md visible-lg">
                  {{#link-to 'featured' class="navbar-link featured-link" }} {{t "common.featured-courses"}} {{/link-to}}
              </li>

              <li class="navbar-nav-list visible-md visible-lg dropdown my-classes">
                <a class="profile dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                  <span class="classes">{{t "common.classes"}}</span>
                  {{gru-icon name='keyboard_arrow_down'}}
                </a>
                <ul class="dropdown-menu pull-right" role="menu" id="profile-dropdown">
                  {{#each activeClasses as |class|}}
                    <li class="navbar-nav-list">
                      {{#link-to 'class.overview' class.id class="navbar-link"}}
                          <span class="class">{{class.title}}</span>
                      {{/link-to}}
                    </li>
                  {{/each}}
                </ul>
              </li>

              <li class="navbar-nav-list visible-md visible-lg profile-link">
                {{#link-to 'profile.content.courses' session.userData.gooruUId class="profile"}}
                  <div class="img-container pull-left">
                    <img class="img-responsive" src="{{session.userData.avatarUrl}}"/>
                  </div>
                  <span class="username">{{truncate text=session.userData.username maxLength=18}}</span>
                {{/link-to}}
              </li>
              <li class="navbar-nav-list visible-md visible-lg dropdown">
                <a class="profile-more dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                  {{gru-icon name='more_vert'}}
                </a>
                <ul class="dropdown-menu pull-right" role="menu" id="profile-more">
                  <li class="navbar-nav-list">
                      <a href="{{supportSiteUrl}}" target="_blank" class="navbar-link">
                        {{t "common.support"}}
                      </a>
                  </li>
                  <li class="navbar-nav-list">
                    <a class="navbar-link" {{action "logout"}}> {{t "common.logout"}}</a>
                  </li>
                </ul>
              </li>
              <li class="navbar-nav-list hidden-md hidden-lg dropdown xs-design">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true">{{gru-icon name='menu'}}</a>
                <ul class="dropdown-menu" role="menu">
                  <li class="navbar-nav-list close-menu">
                    <button class="btn dropdown-toggle" data-toggle="dropdown">{{gru-icon name='close'}}</button>
                  </li>
                  {{#if activeClasses}}
                    <li class="navbar-nav-list">
                      <a class="my-classes">
                        {{t "common.classes"}} {{gru-icon name='keyboard_arrow_down'}} {{gru-icon name='keyboard_arrow_up'}}
                      </a>
                      <ul class="list-group">
                        {{#each activeClasses as |class|}}
                          <li class="list-group-item">
                            {{#link-to 'class.overview' class.id class="navbar-link"}}
                                <span class="class">{{class.title}}</span>
                            {{/link-to}}
                          </li>
                        {{/each}}
                      </ul>
                    </li>
                  {{/if}}
                  <li class="navbar-nav-list">
                    {{#link-to 'profile.content.courses' session.userData.gooruUId class="navbar-link"}}
                      <span class="">{{t "common.profile"}}</span>
                    {{/link-to}}
                  </li>
                  <li class="navbar-nav-list">
                      <a href="{{supportSiteUrl}}" target="_blank" class="navbar-link">
                        <span>{{t "common.support"}}</span>
                      </a>
                  </li>
                  <li class="navbar-nav-list hidden-xs">
                      {{#link-to 'featured' class="navbar-link featured-link" }} {{t "common.featured-courses"}} {{/link-to}}
                  </li>
                  <li class="navbar-nav-list">
                    <a class="navbar-link" {{action "logout"}}> {{t "common.logout"}}</a>
                  </li>
                </ul>
              </li>
            {{/if}}
          </ul>
        </div>
      </nav>
    </div>
  </div>
</div>
