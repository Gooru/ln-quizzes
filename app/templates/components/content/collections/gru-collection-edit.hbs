<header>
    {{#if allowBack}}
      {{#link-to 'content.courses.edit' course.id class="back-to"}}
          <div>
            {{gru-icon name="keyboard_arrow_left"}}{{t 'common.course'}}: {{course.title}}
          </div>
      {{/link-to}}
    {{/if}}
    <h1>{{t "common.edit-collection"}}</h1>

  {{partial 'content/partials/collections-header-actions'}}

  <nav>
    {{#gru-scroll to="#information" class="selected" offset='article > header'}}{{t "common.information"}}{{/gru-scroll}}
    {{#gru-scroll to="#builder" offset='article > header'}}{{t "common.builder"}}{{/gru-scroll}}
    {{#gru-scroll to="#settings" offset='article > header'}}{{t "common.settings"}}{{/gru-scroll}}
  </nav>

</header>

<section id="information">
  <div class="header">
    <h2>{{t "common.information"}}</h2>

    {{partial 'content/partials/information-actions'}}

  </div>
  <div class="content">
    {{content.gru-image isEditing=isEditing srcImage=collection.thumbnailUrl editImage=tempCollection.thumbnailUrl}}
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="title">
          <label>
            <span class="required">{{t "common.collection-title"}}</span>
            {{#if isEditing}}
              {{validation.gru-input model=tempCollection valuePath='title' maxLength=50}}
            {{else}}
              <b>{{collection.title}}</b>
            {{/if}}
          </label>
        </div>
        <div class="learning-objectives">
          <label>
            <span>{{t "common.learning-objectives"}}</span>
            {{#if isEditing}}
              {{validation.gru-textarea model=tempCollection valuePath='learningObjectives' rows=2 maxLength=500}}
            {{else}}
              <b>{{collection.learningObjectives}}</b>
            {{/if}}
          </label>
        </div>

        {{#if isEditing}}
        {{taxonomy.gru-taxonomy-selector
          isEditing=isEditing
          onSubjectSelected="selectSubject"
          selectedSubject=selectedSubject
          internalCategory=k12Category
          subjectLabelKey='common.subject-and-framework'
          showCategories=false
          showCourses=false
          onlySubjectsWithStandards=true
          }}
        {{/if}}
        <div class="subject">
          <label>
            <span>{{t "common.standards"}}</span>
            {{#if isEditing}}
              <button type="button" class="btn btn-primary"
                      {{action 'openTaxonomyModal'}}
                      disabled={{standardDisabled}}>
                {{gru-icon name="open_in_new"}} {{t "common.select"}}
              </button>
              <div class="tags">
                {{taxonomy.gru-taxonomy-tag-list tags=editableTags onRemove=(action 'removeTag')}}
              </div>
            {{else}}
              <div class="tags">
                {{#if tags.length}}
                  {{taxonomy.gru-taxonomy-tag-list tags=tags}}
                {{else}}
                  {{t "common.not-specified"}}
                {{/if}}
              </div>
            {{/if}}
          </label>
        </div>

        {{!content.gru-audience isEditing=isEditing srcSelectedAudiences=collection.audience editSelectedAudiences=tempCollection.audience}}

        <div class="century-skill out-of-scope">
          <span class="label required">21st Century Skills</span>
          {{#if isEditing}}
            <button type="button" class="btn-primary btn-sm add-prefix">{{t "common.add"}}</button>
          {{else}}
            <div class="skills">
              <span>No specified</span>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</section>

<section id="builder">
  {{content.collections.gru-collection-list
    model=collection
    items=collection.children
    editingContent=editingContent}}
</section>

{{content.gru-settings-edit id="settings" action='publishToProfile' model=collection}}
